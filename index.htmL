<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>WebCat</title>
  </head>
  <body>	
	<h1></h1>
	<p></p>  
  </body>
</html>
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§‘æŠ€æ„Ÿç”¨æˆ·ç³»ç»Ÿ</title>
    <style>
        /* å…¨å±€åƒç´ å­—ä½“ï¼ˆMCé£æ ¼ï¼‰ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Press Start 2P', 'Courier New', monospace;
            letter-spacing: 0.5px;
        }

        body {
            background: linear-gradient(to bottom right, #0f172a, #1e293b);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }

        /* ä¸»é¡µé¢LOGOï¼ˆå·¦ä¸Šè§’ï¼‰ */
        .logo {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #3b82f6;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(59, 130, 246, 0.8);
            z-index: 10;
        }

        /* å…¬å…±æ˜Ÿå…‰æ ·å¼ */
        .star-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .star {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            animation: twinkle 1s infinite;
        }

        @keyframes twinkle {
            0% { opacity: 0; transform: scale(0.8); }
            50% { opacity: var(--random-opacity); transform: scale(var(--random-scale)); }
            100% { opacity: 0; transform: scale(0.8); }
        }

        /* ä¸»é¡µé¢è£…é¥° */
        .main-decor {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 0;
        }

        .decor-circle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.1), transparent 70%);
            filter: blur(40px);
        }

        .decor-circle1 {
            width: 400px;
            height: 400px;
            top: 10%;
            left: 10%;
        }

        .decor-circle2 {
            width: 350px;
            height: 350px;
            bottom: 10%;
            right: 10%;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.1), transparent 70%);
        }

        .decor-grid {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(59, 130, 246, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(59, 130, 246, 0.05) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        .decor-line {
            position: absolute;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #22c55e);
            height: 1px;
            filter: blur(1px);
            opacity: 0.3;
        }

        .line1 {
            width: 80%;
            top: 30%;
            left: 10%;
        }

        .line2 {
            width: 60%;
            top: 70%;
            left: 20%;
        }

        /* é¡µé¢åˆ‡æ¢æ˜Ÿå…‰ */
        .switch-stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 101;
            pointer-events: none;
        }

        .switch-star {
            position: absolute;
            border-radius: 50%;
            background: white;
            opacity: 0;
            animation: switchFlash 0.8s ease-in-out forwards;
        }

        @keyframes switchFlash {
            0% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1.2); }
            100% { opacity: 0; transform: scale(0); }
        }

        /* æ ¸å¿ƒæŒ‰é’®æ ·å¼ */
        .card-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            z-index: 1;
            margin-top: 40px;
        }

        .card {
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            color: white;
            font-weight: bold;
            font-size: 18px;
            padding: 0 30px;
            height: 60px;
            width: 220px;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                45deg,
                rgba(59, 130, 246, 0.1),
                rgba(139, 92, 246, 0.2),
                rgba(34, 197, 94, 0.1)
            );
            transform: translateX(-100%);
            animation: flow 6s linear infinite;
        }

        @keyframes flow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .card1 {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.4));
        }

        .card2 {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.4));
        }

        .card3 {
            background: linear-gradient(135deg, #ffd700, #ff9500, #ff4500, #ff00ff, #9900ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            border-color: rgba(255, 215, 0, 0.5);
        }

        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
        }

        .card2:hover {
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.6);
        }

        .card3:hover {
            box-shadow: 0 0 25px rgba(255, 215, 0, 0.8);
            border-color: rgba(255, 215, 0, 0.8);
        }

        /* é¡µé¢å®¹å™¨ */
        .page-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 100;
            display: none;
        }

        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom right, #0f172a, #1e293b);
            padding: 30px;
            color: white;
            transition: opacity 0.3s ease;
            opacity: 0;
            pointer-events: none;
            overflow-y: auto;
        }

        .page.active {
            opacity: 1;
            pointer-events: all;
        }

        /* é€šç”¨ç»„ä»¶æ ·å¼ */
        .back-btn {
            position: absolute;
            top: 30px;
            left: 30px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.5);
            color: #3b82f6;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 102;
        }

        .back-btn:hover {
            background: rgba(59, 130, 246, 0.4);
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.8);
            transform: scale(1.1);
        }

        .back-to-main-btn {
            display: block;
            width: 180px;
            height: 45px;
            margin: 40px auto 60px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: 1px solid rgba(59, 130, 246, 0.5);
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            line-height: 45px;
            text-decoration: none;
        }

        .back-to-main-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.6);
            background: linear-gradient(135deg, #2563eb, #7c3aed);
        }

        .page-header {
            text-align: center;
            margin-bottom: 30px;
            padding-top: 20px;
        }

        .page-title {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #22c55e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 8px rgba(59, 130, 246, 0.6);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 16px;
            color: #cbd5e1;
        }

        .form-input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            outline: none;
            border: 1px solid rgba(59, 130, 246, 0.3);
            transition: all 0.3s ease;
        }

        .form-input:focus {
            border-color: #8b5cf6;
            box-shadow: 0 0 8px rgba(139, 92, 246, 0.6);
        }

        .form-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #22c55e);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .form-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
        }

        .form-link {
            color: #3b82f6;
            text-decoration: none;
            margin-left: 10px;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .form-link:hover {
            color: #8b5cf6;
            text-decoration: underline;
        }

        .form-hint {
            font-size: 12px;
            color: #64748b;
            margin-top: 4px;
            line-height: 1.4;
        }

        .success-hint {
            color: #22c55e;
            margin-top: 10px;
            font-size: 14px;
            display: none;
        }

        /* ç”¨æˆ·åå°æ ·å¼ */
        .backend-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(59, 130, 246, 0.3);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .backend-title {
            font-size: 20px;
            font-weight: bold;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #22c55e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 8px rgba(59, 130, 246, 0.6);
        }

        .logout-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 8px rgba(139, 92, 246, 0.6);
        }

        .backend-content {
            display: flex;
            gap: 20px;
        }

        .backend-sidebar {
            width: 200px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .sidebar-menu {
            list-style: none;
        }

        .menu-item {
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #cbd5e1;
        }

        .menu-item:hover, .menu-item.active {
            background: rgba(139, 92, 246, 0.1);
            color: white;
            border-left: 3px solid #8b5cf6;
            padding-left: 12px;
        }

        .backend-main {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .main-title {
            font-size: 18px;
            margin-bottom: 20px;
            color: white;
        }

        /* æ§åˆ¶å°æ ·å¼ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .data-card {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 18px;
            transition: all 0.3s ease;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.5);
        }

        .data-title {
            font-size: 14px;
            margin-bottom: 12px;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .data-value {
            font-size: 22px;
            font-weight: bold;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #22c55e);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .data-desc {
            font-size: 12px;
            color: #64748b;
            margin-top: 8px;
        }

        .card-list {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            padding: 18px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .card-item {
            padding: 12px 0;
            border-bottom: 1px solid rgba(59, 130, 246, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-item:last-child {
            border-bottom: none;
        }

        .card-info {
            display: flex;
            flex-direction: column;
        }

        .card-code {
            font-size: 14px;
            color: #e2e8f0;
            font-family: 'Courier New', monospace;
        }

        .card-status {
            font-size: 12px;
            color: #22c55e;
            margin-top: 4px;
        }

        .card-time {
            font-size: 12px;
            color: #94a3b8;
            text-align: right;
        }

        /* æ¿€æ´»åŒºåŸŸæ ·å¼ */
        .activation-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid rgba(59, 130, 246, 0.2);
        }

        .activation-title {
            font-size: 16px;
            margin-bottom: 15px;
            color: #cbd5e1;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .activation-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: linear-gradient(180deg, #3b82f6, #8b5cf6);
            border-radius: 2px;
        }

        /* å¤´åƒåŠŸèƒ½æ ·å¼ */
        .profile-avatar {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 35px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(139, 92, 246, 0.05));
            border-radius: 20px;
            border: 1px solid rgba(139, 92, 246, 0.2);
            width: 100%;
            max-width: 450px;
            margin-left: auto;
            margin-right: auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .avatar-title {
            font-size: 20px;
            color: #e2e8f0;
            margin-bottom: 20px;
            font-weight: 600;
            text-align: center;
        }

        .avatar-frame {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            position: relative;
            margin-bottom: 22px;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.03);
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        .avatar-frame::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6, #22c55e);
            opacity: 0.2;
            z-index: 1;
        }

        .avatar-frame:hover {
            transform: translateY(-6px);
            box-shadow: 0 12px 24px rgba(139, 92, 246, 0.2);
        }

        .avatar-frame:hover::before {
            opacity: 0.4;
        }

        .avatar-initial {
            font-size: 64px;
            color: #cbd5e1;
            font-weight: bold;
            z-index: 2;
            transition: all 0.3s ease;
        }

        .avatar-frame:hover .avatar-initial {
            color: white;
            transform: scale(1.05);
        }

        .avatar-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 2;
            display: none;
        }

        .avatar-actions {
            display: flex;
            gap: 15px;
            width: 100%;
            justify-content: center;
            margin-bottom: 12px;
        }

        .avatar-action-btn {
            padding: 10px 28px;
            border-radius: 12px;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-upload {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
        }

        .btn-upload:hover {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(139, 92, 246, 0.3);
        }

        .btn-reset {
            background: rgba(255, 255, 255, 0.08);
            color: #cbd5e1;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .btn-reset:hover {
            background: rgba(255, 255, 255, 0.12);
            color: white;
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateY(-3px);
        }

        .avatar-file-input {
            display: none;
        }

        .avatar-notice {
            font-size: 13px;
            color: #94a3b8;
            text-align: center;
            line-height: 1.5;
            max-width: 300px;
        }

        /* å¤´åƒæ“ä½œåé¦ˆå¼¹çª— */
        .avatar-toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            padding: 16px 28px;
            background: rgba(15, 23, 42, 0.95);
            border-radius: 12px;
            border: 1px solid rgba(139, 92, 246, 0.4);
            color: #e2e8f0;
            font-size: 15px;
            z-index: 9999;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .avatar-toast.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: auto;
        }

        /* å“åº”å¼é€‚é… */
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .backend-content {
                flex-direction: column;
            }
            .backend-sidebar {
                width: 100%;
            }
            .sidebar-menu {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            .profile-avatar {
                padding: 20px;
                max-width: 100%;
            }
            .avatar-frame {
                width: 150px;
                height: 150px;
            }
            .avatar-initial {
                font-size: 56px;
            }
            .avatar-actions {
                flex-direction: column;
                gap: 10px;
                width: 90%;
            }
            .avatar-action-btn {
                width: 100%;
                justify-content: center;
                padding: 10px 20px;
            }
            .back-to-main-btn {
                width: 150px;
                margin: 30px auto 40px;
            }
            .logo {
                font-size: 20px;
                top: 15px;
                left: 15px;
            }
        }

        /* è¾…åŠ©æ ·å¼ */
        .text-center {
            text-align: center;
        }
        .mt-4 {
            margin-top: 16px;
        }
        .flex {
            display: flex;
        }
        .justify-center {
            justify-content: center;
        }
        .w-full {
            width: 100%;
        }
        .max-w-md {
            max-width: 350px;
        }
    </style>
    <!-- å¼•å…¥åƒç´ å­—ä½“ï¼ˆå¤‡ç”¨ï¼‰ -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <!-- å·¦ä¸Šè§’LOGO -->
    <div class="logo">CARP</div>

    <!-- å…¨å±€æ˜Ÿå…‰å®¹å™¨ -->
    <div class="star-container" id="globalStars"></div>

    <!-- ä¸»é¡µé¢è£…é¥° -->
    <div class="main-decor">
        <div class="decor-circle decor-circle1"></div>
        <div class="decor-circle decor-circle2"></div>
        <div class="decor-grid"></div>
        <div class="decor-line line1"></div>
        <div class="decor-line line2"></div>
    </div>

    <!-- é¡µé¢åˆ‡æ¢æ˜Ÿå…‰å®¹å™¨ -->
    <div class="switch-stars-container" id="switchStarsContainer"></div>

    <!-- å¤´åƒæ“ä½œåé¦ˆå¼¹çª— -->
    <div class="avatar-toast" id="avatarToast">æ“ä½œæˆåŠŸ</div>

    <!-- åˆå§‹ä¸»ç•Œé¢æŒ‰é’® -->
    <div class="card-container">
        <div class="card card1" id="userCenterCard">ç”¨æˆ·ä¸­å¿ƒ</div>
        <div class="card card2" id="buyCard">è´­ä¹°å¡å¯†</div>
        <div class="card card3" id="vipCenterCard">ä¼šå‘˜ä¸­å¿ƒ</div>
    </div>

    <!-- é¡µé¢å®¹å™¨ -->
    <div class="page-container" id="pageContainer">
        <!-- ç™»å½•é¡µé¢ -->
        <div id="loginPage" class="page active">
            <div class="back-btn" id="loginBackBtn">â†</div>
            <div class="page-header">
                <h2 class="page-title">ç”¨æˆ·ç™»å½•</h2>
            </div>
            <div class="flex justify-center">
                <div class="w-full max-w-md">
                    <div class="form-group">
                        <label class="form-label">è´¦å·</label>
                        <input type="text" class="form-input" id="loginUsername" placeholder="è¯·è¾“å…¥è´¦å·">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å¯†ç </label>
                        <input type="password" class="form-input" id="loginPassword" placeholder="è¯·è¾“å…¥å¯†ç ">
                    </div>
                    <button class="form-btn" id="loginSubmit">ç™»å½•</button>
                    <p class="text-center mt-4">
                        æ–°ç”¨æˆ·ï¼Ÿ<a href="javascript:;" id="toRegLink" class="form-link">ç«‹å³æ³¨å†Œ</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- æ³¨å†Œé¡µé¢ -->
        <div id="registerPage" class="page">
            <div class="back-btn" id="regBackBtn">â†</div>
            <div class="page-header">
                <h2 class="page-title">ç”¨æˆ·æ³¨å†Œ</h2>
            </div>
            <div class="flex justify-center">
                <div class="w-full max-w-md">
                    <div class="form-group">
                        <label class="form-label">è´¦å·</label>
                        <input type="text" class="form-input" id="regUsername" placeholder="è¯·è®¾ç½®è´¦å·">
                    </div>
                    <div class="form-group">
                        <label class="form-label">å¯†ç </label>
                        <input type="password" class="form-input" id="regPassword" placeholder="è¯·è®¾ç½®å¯†ç ï¼ˆ6-20ä½å­—ç¬¦ï¼‰">
                        <div class="form-hint">æç¤ºï¼šå¯†ç é•¿åº¦ä¸º6-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—</div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ç”¨æˆ·æ¿€æ´»ç </label>
                        <input type="text" class="form-input" id="verifyCode" placeholder="è¯·è¾“å…¥ç”¨æˆ·æ¿€æ´»ç ">
                    </div>
                    <button class="form-btn" id="regSubmit">æ³¨å†Œ</button>
                    <p class="text-center mt-4">
                        å·²æœ‰è´¦å·ï¼Ÿ<a href="javascript:;" id="toLoginLink" class="form-link">ç«‹å³ç™»å½•</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- ç”¨æˆ·åå°é¡µé¢ -->
        <div id="userBackend" class="page">
            <div class="backend-header">
                <div class="backend-title">ç”¨æˆ·åå°</div>
                <button class="logout-btn" id="logoutBtn">é€€å‡ºç™»å½•</button>
            </div>
            <div class="backend-content">
                <div class="backend-sidebar">
                    <ul class="sidebar-menu">
                        <li class="menu-item active" data-target="dashboard">æ§åˆ¶å°</li>
                        <li class="menu-item" data-target="cards">æˆ‘çš„å¡å¯†</li>
                        <li class="menu-item" data-target="downloads">å·¥å…·ä¸‹è½½</li>
                        <li class="menu-item" data-target="settings">è´¦æˆ·è®¾ç½®</li>
                    </ul>
                </div>
                <div class="backend-main" id="dashboard">
                    <div class="main-title">æ§åˆ¶å°æ¦‚è§ˆ</div>
                    
                    <!-- å¤´åƒåŠŸèƒ½åŒºåŸŸ -->
                    <div class="profile-avatar">
                        <div class="avatar-title">ä¸ªäººå¤´åƒç®¡ç†</div>
                        <div class="avatar-frame" id="avatarFrame">
                            <span class="avatar-initial" id="avatarInitial">U</span>
                            <img class="avatar-image" id="avatarImage">
                        </div>
                        <div class="avatar-actions">
                            <label class="avatar-action-btn btn-upload">
                                ğŸ“¸ é€‰æ‹©å›¾ç‰‡
                                <input type="file" class="avatar-file-input" id="avatarFileInput" accept="image/jpeg,image/png,image/webp">
                            </label>
                            <button class="avatar-action-btn btn-reset" id="resetAvatarBtn">
                                ğŸ”„ é‡ç½®å¤´åƒ
                            </button>
                        </div>
                        <div class="avatar-notice">
                            æ”¯æŒJPGã€PNGã€WebPæ ¼å¼ï¼Œå»ºè®®å°ºå¯¸200x200pxï¼Œå¤§å°ä¸è¶…è¿‡5MB
                        </div>
                    </div>
                    
                    <!-- æ•°æ®å¡ç‰‡ç½‘æ ¼ -->
                    <div class="dashboard-grid">
                        <div class="data-card">
                            <div class="data-title">ğŸ“… è´¦å·æ³¨å†Œæ—¶é—´</div>
                            <div class="data-value" id="registerTime">--</div>
                            <div class="data-desc">è´¦å·åˆ›å»ºæ°¸ä¹…æœ‰æ•ˆ</div>
                        </div>
                        <div class="data-card">
                            <div class="data-title">ğŸ”” æœ€è¿‘ç™»å½•æ—¶é—´</div>
                            <div class="data-value" id="lastLoginTime">--</div>
                            <div class="data-desc">å½“å‰ä¸ºæœ€æ–°ç™»å½•</div>
                        </div>
                        <div class="data-card">
                            <div class="data-title">ğŸ—‚ï¸ å·²æ¿€æ´»å¡å¯†æ•°</div>
                            <div class="data-value" id="activatedCardCount">0</div>
                            <div class="data-desc">æ–°ç”¨æˆ·åˆå§‹ä¸º0</div>
                        </div>
                        <div class="data-card">
                            <div class="data-title">â±ï¸ å¡å¯†å·²ä½¿ç”¨æ—¶é•¿</div>
                            <div class="data-value" id="usedTime">0 å°æ—¶</div>
                            <div class="data-desc">ç´¯è®¡æ¿€æ´»ä½¿ç”¨æ—¶é—´</div>
                        </div>
                        <div class="data-card">
                            <div class="data-title">âŒ› å¡å¯†å‰©ä½™æ—¶é•¿</div>
                            <div class="data-value" id="remainingTime">0 å°æ—¶</div>
                            <div class="data-desc">æ‰€æœ‰å·²æ¿€æ´»å¡å¯†å‰©ä½™æ—¶é—´</div>
                        </div>
                        <div class="data-card">
                            <div class="data-title">ğŸ“… å¡å¯†æ€»åˆ°æœŸæ—¶é—´</div>
                            <div class="data-value" id="totalExpireTime">--</div>
                            <div class="data-desc">æ‰€æœ‰å¡å¯†æœ‰æ•ˆæœŸæˆªæ­¢æ—¶é—´</div>
                        </div>
                    </div>

                    <div class="card-list">
                        <div class="main-title" style="margin-bottom: 15px; font-size: 16px;">å·²æ¿€æ´»å¡å¯†è¯¦æƒ…</div>
                        <div id="activatedCardsList">
                            <div class="card-item">
                                <div class="card-info">
                                    <div class="card-code">æš‚æ— å·²æ¿€æ´»å¡å¯†</div>
                                    <div class="card-status">æœªæ¿€æ´»ä»»ä½•å¡å¯†</div>
                                </div>
                                <div class="card-time">--</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="backend-main" id="cards" style="display:none;">
                    <div class="main-title">æˆ‘çš„å¡å¯†</div>
                    <div class="card-list" id="myCardsList">
                        <div class="card-item">
                            <div class="card-info">
                                <div class="card-code">æš‚æ— å·²æ¿€æ´»å¡å¯†</div>
                                <div class="card-status">è¯·æ¿€æ´»æ–°å¡å¯†</div>
                            </div>
                            <div class="card-time">--</div>
                        </div>
                    </div>

                    <!-- å¡å¯†æ¿€æ´»åŒºåŸŸ -->
                    <div class="activation-section">
                        <div class="activation-title">æ¿€æ´»å¡å¯†</div>
                        <div class="form-group">
                            <label class="form-label">å¡å¯†</label>
                            <div style="display: flex; gap: 10px; align-items: center;">
                                <input type="text" class="form-input" id="cardCodeInput" placeholder="è¾“å…¥å¡å¯†" style="max-width: 220px;">
                                <button class="form-btn" id="activateCardBtn">æ¿€æ´»</button>
                            </div>
                            <div class="form-hint">æç¤ºï¼šè¾“å…¥è·å–åˆ°çš„å¡å¯†è¿›è¡Œæ¿€æ´»ï¼ŒåŒä¸€è´¦å·ä¸å¯é‡å¤ä½¿ç”¨åŒä¸€å¡å¯†</div>
                        </div>
                    </div>
                </div>

                <div class="backend-main" id="downloads" style="display:none;">
                    <div class="main-title">å·¥å…·ä¸‹è½½</div>
                    <div class="data-card">
                        <div class="data-title">Carpè¾…åŠ©å·¥å…· v3.5</div>
                        <div class="data-value">
                            <a href="https://www.123865.com/s/7tNmvd-2zcDH" style="color:#3b82f6; text-decoration:none; display:inline-flex; align-items:center; gap:8px;">
                                ğŸ“¥ ç‚¹å‡»ä¸‹è½½
                            </a>
                        </div>
                        <div class="data-desc">æ–‡ä»¶å¤§å°ï¼š356.47MB | æ›´æ–°æ—¶é—´ï¼š2025-10-18</div>
                    </div>
                </div>

                <div class="backend-main" id="settings" style="display:none;">
                    <div class="main-title">è´¦æˆ·è®¾ç½®</div>
                    <div class="data-card" style="margin-bottom: 20px;">
                        <div class="data-title">ä¿®æ”¹è´¦æˆ·åç§°</div>
                        <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 10px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">å½“å‰è´¦å·</label>
                                <input type="text" class="form-input" id="currentUsername" value="" disabled style="background: rgba(255,255,255,0.05);">
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">æ–°è´¦å·åç§°</label>
                                <input type="text" class="form-input" id="newUsername" placeholder="è¯·è¾“å…¥æ–°è´¦å·åç§°">
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">éªŒè¯å¯†ç </label>
                                <input type="password" class="form-input" id="verifyPwdForName" placeholder="è¾“å…¥å¯†ç éªŒè¯èº«ä»½">
                            </div>
                            <div class="success-hint" id="usernameSuccessHint">âœ“ è´¦å·åç§°ä¿®æ”¹æˆåŠŸï¼</div>
                            <button class="form-btn" id="saveUsernameBtn" style="width: fit-content;">ä¿å­˜ä¿®æ”¹</button>
                        </div>
                    </div>
                    <div class="data-card">
                        <div class="data-title">ä¿®æ”¹å¯†ç </div>
                        <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 10px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">åŸå¯†ç </label>
                                <input type="password" class="form-input" id="oldPassword" placeholder="è¯·è¾“å…¥åŸå¯†ç ">
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">æ–°å¯†ç </label>
                                <input type="password" class="form-input" id="newPassword" placeholder="è¯·è¾“å…¥æ–°å¯†ç ï¼ˆ6-20ä½ï¼‰">
                                <div class="form-hint">æç¤ºï¼šå¯†ç é•¿åº¦ä¸º6-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—</div>
                            </div>
                            <div class="form-group" style="margin-bottom: 0;">
                                <label class="form-label">ç¡®è®¤æ–°å¯†ç </label>
                                <input type="password" class="form-input" id="confirmNewPassword" placeholder="è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ">
                            </div>
                            <div class="success-hint" id="passwordSuccessHint">âœ“ å¯†ç ä¿®æ”¹æˆåŠŸï¼</div>
                            <button class="form-btn" id="savePasswordBtn" style="width: fit-content;">ä¿å­˜ä¿®æ”¹</button>
                        </div>
                    </div>
                </div>
            </div>
            <a href="javascript:;" class="back-to-main-btn" id="backToMainBtn">è¿”å›ä¸»é¡µé¢</a>
        </div>
    </div>

    <script>
        // é€šç”¨å·¥å…·å‡½æ•°
        const utils = {
            createStars(container, count, config) {
                container.innerHTML = '';
                for (let i = 0; i < count; i++) {
                    const star = document.createElement('div');
                    star.className = 'star';
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    const size = Math.random() * 2 + (config.minSize || 0.5);
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;
                    const colors = config.colors || ['#3b82f6', '#8b5cf6', '#22c55e', '#ffffff'];
                    star.style.background = colors[Math.floor(Math.random() * colors.length)];
                    const twinkleSpeed = Math.random() * (config.maxSpeed - config.minSpeed) + config.minSpeed;
                    star.style.animationDuration = `${twinkleSpeed}s`;
                    const randomOpacity = Math.random() * (config.maxOpacity - config.minOpacity) + config.minOpacity;
                    const randomScale = Math.random() * (config.maxScale - config.minScale) + config.minScale;
                    star.style.setProperty('--random-opacity', randomOpacity);
                    star.style.setProperty('--random-scale', randomScale);
                    star.style.animationDelay = `${Math.random() * (config.delay || 5)}s`;
                    container.appendChild(star);
                }
            },
            switchPage(fromPage, toPage, isBackToMain = false) {
                this.createSwitchStars();
                fromPage.classList.remove('active');
                setTimeout(() => {
                    if (isBackToMain) pageContainer.style.display = 'none';
                    else toPage.classList.add('active');
                }, 150);
                setTimeout(() => switchStarsContainer.innerHTML = '', 800);
            },
            createSwitchStars(count = 50) {
                switchStarsContainer.innerHTML = '';
                for (let i = 0; i < count; i++) {
                    const star = document.createElement('div');
                    star.className = 'switch-star';
                    const size = Math.random() * 3 + 1;
                    star.style.width = `${size}px`;
                    star.style.height = `${size}px`;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.animationDelay = `${Math.random() * 0.5}s`;
                    const colors = ['#3b82f6', '#8b5cf6', '#22c55e', '#ffffff'];
                    star.style.background = colors[Math.floor(Math.random() * colors.length)];
                    switchStarsContainer.appendChild(star);
                }
            },
            formatTime(timestamp) {
                const date = new Date(timestamp);
                return `${date.getFullYear()}-${(date.getMonth() + 1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}:${date.getSeconds().toString().padStart(2, '0')}`;
            },
            saveToStorage(key, data) {
                localStorage.setItem(key, JSON.stringify(data));
            },
            getFromStorage(key) {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            },
            showToast(toastEl, message, duration = 2500) {
                toastEl.textContent = message;
                toastEl.classList.add('show');
                setTimeout(() => {
                    toastEl.classList.remove('show');
                }, duration);
            },
            getUsernameInitial(username) {
                return username ? username.charAt(0).toUpperCase() : 'U';
            }
        };

        // æ ¸å¿ƒå…ƒç´ è·å–
        const userCenterCard = document.getElementById('userCenterCard');
        const buyCard = document.getElementById('buyCard');
        const vipCenterCard = document.getElementById('vipCenterCard');
        const pageContainer = document.getElementById('pageContainer');
        const loginPage = document.getElementById('loginPage');
        const registerPage = document.getElementById('registerPage');
        const userBackend = document.getElementById('userBackend');
        const loginUsername = document.getElementById('loginUsername');
        const loginPassword = document.getElementById('loginPassword');
        const loginSubmit = document.getElementById('loginSubmit');
        const toRegLink = document.getElementById('toRegLink');
        const regUsername = document.getElementById('regUsername');
        const regPassword = document.getElementById('regPassword');
        const verifyCode = document.getElementById('verifyCode');
        const regSubmit = document.getElementById('regSubmit');
        const toLoginLink = document.getElementById('toLoginLink');
        const logoutBtn = document.getElementById('logoutBtn');
        const menuItems = document.querySelectorAll('.menu-item');
        const mainSections = document.querySelectorAll('.backend-main');
        const loginBackBtn = document.getElementById('loginBackBtn');
        const regBackBtn = document.getElementById('regBackBtn');
        const globalStars = document.getElementById('globalStars');
        const switchStarsContainer = document.getElementById('switchStarsContainer');
        const avatarToast = document.getElementById('avatarToast');
        const backToMainBtn = document.getElementById('backToMainBtn');

        // åŠŸèƒ½æ¨¡å—å…ƒç´ 
        const registerTimeEl = document.getElementById('registerTime');
        const lastLoginTimeEl = document.getElementById('lastLoginTime');
        const activatedCardCountEl = document.getElementById('activatedCardCount');
        const usedTimeEl = document.getElementById('usedTime');
        const remainingTimeEl = document.getElementById('remainingTime');
        const totalExpireTimeEl = document.getElementById('totalExpireTime');
        const activatedCardsListEl = document.getElementById('activatedCardsList');
        const myCardsListEl = document.getElementById('myCardsList');
        const cardCodeInput = document.getElementById('cardCodeInput');
        const activateCardBtn = document.getElementById('activateCardBtn');
        const currentUsernameEl = document.getElementById('currentUsername');
        const newUsernameEl = document.getElementById('newUsername');
        const verifyPwdForNameEl = document.getElementById('verifyPwdForName');
        const saveUsernameBtn = document.getElementById('saveUsernameBtn');
        const usernameSuccessHint = document.getElementById('usernameSuccessHint');
        const oldPasswordInput = document.getElementById('oldPassword');
        const newPasswordInput = document.getElementById('newPassword');
        const confirmNewPasswordInput = document.getElementById('confirmNewPassword');
        const savePasswordBtn = document.getElementById('savePasswordBtn');
        const passwordSuccessHint = document.getElementById('passwordSuccessHint');
        const avatarFrame = document.getElementById('avatarFrame');
        const avatarInitial = document.getElementById('avatarInitial');
        const avatarImage = document.getElementById('avatarImage');
        const avatarFileInput = document.getElementById('avatarFileInput');
        const resetAvatarBtn = document.getElementById('resetAvatarBtn');

        // ç³»ç»Ÿé…ç½®
        const CONFIG = {
            USER_ACTIVATION_CODE: '17662540581',
            VALID_CARDS: [
                { code: '1', days: 30 },
                { code: '5', days: 25 },
                { code: '666', days: 30 },
                { code: '888', days: 45 }
            ],
            REGISTER_INTERVAL: 3600000,
            AVATAR_CONFIG: {
                MAX_SIZE: 5 * 1024 * 1024,
                MAX_DIMENSION: 1000,
                COMPRESS_QUALITY: 0.75
            },
            STORAGE_KEYS: {
                USERS: 'system_users',
                USER_REGISTER_TIMES: 'user_register_times',
                USER_PROFILES: 'user_profiles'
            }
        };

        // åˆå§‹åŒ–æ•°æ®
        let users = utils.getFromStorage(CONFIG.STORAGE_KEYS.USERS) || [];
        let userRegisterTimes = utils.getFromStorage(CONFIG.STORAGE_KEYS.USER_REGISTER_TIMES) || {};
        let userProfiles = utils.getFromStorage(CONFIG.STORAGE_KEYS.USER_PROFILES) || {};
        let currentUser = null;
        let isFirstLogin = true;

        // åˆå§‹åŒ–æ˜Ÿå…‰
        utils.createStars(globalStars, 200, {
            minSpeed: 0.5,
            maxSpeed: 3,
            minOpacity: 0.3,
            maxOpacity: 0.9,
            minScale: 0.5,
            maxScale: 1.2,
            delay: 10
        });

        // æ ¸å¿ƒåŠŸèƒ½å‡½æ•°
        function hasUserUsedCode(user, code) {
            return user.activatedCards && user.activatedCards.some(card => card.code === code);
        }

        function calculateCardStats(user) {
            const now = new Date().getTime();
            let totalValidHours = 0;
            let totalUsedHours = 0;
            
            if (user.activatedCards && user.activatedCards.length > 0) {
                user.activatedCards.forEach(card => {
                    totalValidHours += card.validDays * 24;
                    totalUsedHours += Math.floor((now - card.activateTime) / 3600000);
                });
            }
            
            const totalRemainingHours = Math.max(0, totalValidHours - totalUsedHours);
            const totalExpireTimestamp = now + totalRemainingHours * 3600000;
            
            return {
                usedHours: totalUsedHours,
                remainingHours: totalRemainingHours,
                expireTime: totalExpireTimestamp > now ? totalExpireTimestamp : null
            };
        }

        function refreshCardData(user) {
            const stats = calculateCardStats(user);
            const activatedCount = user.activatedCards ? user.activatedCards.length : 0;
            
            activatedCardCountEl.textContent = activatedCount;
            usedTimeEl.textContent = `${stats.usedHours} å°æ—¶`;
            remainingTimeEl.textContent = `${stats.remainingHours} å°æ—¶`;
            totalExpireTimeEl.textContent = stats.expireTime ? utils.formatTime(stats.expireTime) : 'å·²è¿‡æœŸ';
            
            let cardsHtml = '';
            if (activatedCount > 0) {
                user.activatedCards.forEach(card => {
                    const expireHours = Math.floor((card.expireTime - new Date().getTime()) / 3600000);
                    cardsHtml += `
                        <div class="card-item">
                            <div class="card-info">
                                <div class="card-code">${card.code}</div>
                                <div class="card-status">${expireHours > 0 ? 'æ­£å¸¸' : 'å·²è¿‡æœŸ'}</div>
                            </div>
                            <div class="card-time">åˆ°æœŸæ—¶é—´ï¼š${utils.formatTime(card.expireTime)}</div>
                        </div>
                    `;
                });
            } else {
                cardsHtml = `
                    <div class="card-item">
                        <div class="card-info">
                            <div class="card-code">æš‚æ— å·²æ¿€æ´»å¡å¯†</div>
                            <div class="card-status">æœªæ¿€æ´»ä»»ä½•å¡å¯†</div>
                        </div>
                        <div class="card-time">--</div>
                    </div>
                `;
            }
            
            activatedCardsListEl.innerHTML = cardsHtml;
            myCardsListEl.innerHTML = cardsHtml;
        }

        function updateDashboard(user) {
            registerTimeEl.textContent = utils.formatTime(user.registerTime);
            const now = new Date().getTime();
            user.lastLoginTime = now;
            lastLoginTimeEl.textContent = utils.formatTime(now);
            refreshCardData(user);
            initAvatar(user.username);
            utils.saveToStorage(CONFIG.STORAGE_KEYS.USERS, users);
        }

        // å¡å¯†æ¿€æ´»
        activateCardBtn.addEventListener('click', () => {
            if (!currentUser) return;
            const inputCode = cardCodeInput.value.trim();
            if (!inputCode) { alert('è¯·è¾“å…¥å¡å¯†ï¼'); return; }
            if (hasUserUsedCode(currentUser, inputCode)) {
                alert('è¯¥å¡å¯†å·²è¢«å½“å‰è´¦å·ä½¿ç”¨ï¼ŒåŒä¸€è´¦å·ä¸å¯é‡å¤æ¿€æ´»ï¼');
                cardCodeInput.value = '';
                return;
            }
            const validCard = CONFIG.VALID_CARDS.find(card => card.code === inputCode);
            if (!validCard) { alert('å¡å¯†é”™è¯¯ï¼è¯·è¾“å…¥æ­£ç¡®çš„å¡å¯†'); cardCodeInput.value = ''; return; }
            
            if (!currentUser.activatedCards) currentUser.activatedCards = [];
            const now = new Date().getTime();
            const expireTime = now + validCard.days * 24 * 3600000;
            currentUser.activatedCards.push({ 
                code: inputCode, 
                activateTime: now, 
                expireTime: expireTime, 
                validDays: validCard.days
            });
            
            refreshCardData(currentUser);
            cardCodeInput.value = '';
            alert(`å¡å¯†æ¿€æ´»æˆåŠŸï¼æœ‰æ•ˆæœŸ${validCard.days}å¤©`);
            utils.saveToStorage(CONFIG.STORAGE_KEYS.USERS, users);
        });

        // å¤´åƒåŠŸèƒ½
        function initAvatar(username) {
            avatarInitial.textContent = utils.getUsernameInitial(username);
            const userProfile = userProfiles[username] || {};
            if (userProfile.avatarUrl) {
                avatarImage.src = userProfile.avatarUrl;
                avatarImage.style.display = 'block';
                avatarInitial.style.display = 'none';
            } else {
                avatarImage.style.display = 'none';
                avatarInitial.style.display = 'block';
            }
        }

        function handleImageUpload(file) {
            if (!currentUser) {
                utils.showToast(avatarToast, 'è¯·å…ˆç™»å½•åæ“ä½œ');
                return;
            }
            const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
            if (!allowedTypes.includes(file.type)) {
                utils.showToast(avatarToast, 'ä»…æ”¯æŒJPGã€PNGã€WebPæ ¼å¼');
                return;
            }
            if (file.size > CONFIG.AVATAR_CONFIG.MAX_SIZE) {
                utils.showToast(avatarToast, 'å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const maxDim = CONFIG.AVATAR_CONFIG.MAX_DIMENSION;
                    let width = img.width;
                    let height = img.height;
                    if (width > maxDim || height > maxDim) {
                        const ratio = Math.min(maxDim / width, maxDim / height);
                        width = Math.round(width * ratio);
                        height = Math.round(height * ratio);
                    }
                    
                    const canvas = document.createElement('canvas');
                    canvas.width = width;
                    canvas.height = height;
                    const ctx = canvas.getContext('2d');
                    ctx.clearRect(0, 0, width, height);
                    const radius = Math.min(width, height) / 2;
                    ctx.beginPath();
                    ctx.arc(width / 2, height / 2, radius, 0, Math.PI * 2);
                    ctx.clip();
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    canvas.toBlob(function(blob) {
                        const resultReader = new FileReader();
                        resultReader.onload = function(resultE) {
                            const avatarUrl = resultE.target.result;
                            if (!userProfiles[currentUser.username]) userProfiles[currentUser.username] = {};
                            userProfiles[currentUser.username].avatarUrl = avatarUrl;
                            utils.saveToStorage(CONFIG.STORAGE_KEYS.USER_PROFILES, userProfiles);
                            avatarImage.src = avatarUrl;
                            avatarImage.style.display = 'block';
                            avatarInitial.style.display = 'none';
                            utils.showToast(avatarToast, 'å¤´åƒä¸Šä¼ æˆåŠŸ');
                        };
                        resultReader.readAsDataURL(blob);
                    }, 'image/webp', CONFIG.AVATAR_CONFIG.COMPRESS_QUALITY);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        resetAvatarBtn.addEventListener('click', () => {
            if (!currentUser) {
                utils.showToast(avatarToast, 'è¯·å…ˆç™»å½•åæ“ä½œ');
                return;
            }
            if (userProfiles[currentUser.username]) {
                delete userProfiles[currentUser.username].avatarUrl;
                utils.saveToStorage(CONFIG.STORAGE_KEYS.USER_PROFILES, userProfiles);
            }
            avatarImage.style.display = 'none';
            avatarInitial.style.display = 'block';
            avatarInitial.textContent = utils.getUsernameInitial(currentUser.username);
            utils.showToast(avatarToast, 'å¤´åƒå·²é‡ç½®');
        });

        avatarFileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                handleImageUpload(file);
                avatarFileInput.value = '';
            }
        });

        avatarFrame.addEventListener('click', () => avatarFileInput.click());

        // è´¦æˆ·è®¾ç½®
        saveUsernameBtn.addEventListener('click', () => {
            if (!currentUser) return;
            const newUsername = newUsernameEl.value.trim();
            const verifyPwd = verifyPwdForNameEl.value.trim();
            if (!newUsername || !verifyPwd) { alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼'); return; }
            if (verifyPwd !== currentUser.password) { alert('å¯†ç éªŒè¯é”™è¯¯ï¼'); return; }
            if (users.some(u => u.username === newUsername)) { alert('è¯¥è´¦å·åç§°å·²è¢«å ç”¨ï¼'); return; }
            
            if (userProfiles[currentUser.username]) {
                userProfiles[newUsername] = userProfiles[currentUser.username];
                delete userProfiles[currentUser.username];
                utils.saveToStorage(CONFIG.STORAGE_KEYS.USER_PROFILES, userProfiles);
            }
            
            currentUser.username = newUsername;
            currentUsernameEl.value = newUsername;
            newUsernameEl.value = '';
            verifyPwdForNameEl.value = '';
            avatarInitial.textContent = utils.getUsernameInitial(newUsername);
            usernameSuccessHint.style.display = 'block';
            setTimeout(() => usernameSuccessHint.style.display = 'none', 3000);
            utils.saveToStorage(CONFIG.STORAGE_KEYS.USERS, users);
        });

        savePasswordBtn.addEventListener('click', () => {
            if (!currentUser) return;
            const oldPassword = oldPasswordInput.value.trim();
            const newPassword = newPasswordInput.value.trim();
            const confirmNewPassword = confirmNewPasswordInput.value.trim();
            if (!oldPassword || !newPassword || !confirmNewPassword) { alert('è¯·å¡«å†™å®Œæ•´å¯†ç ä¿¡æ¯ï¼'); return; }
            if (oldPassword !== currentUser.password) { alert('åŸå¯†ç é”™è¯¯ï¼'); return; }
            const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d).{6,20}$/;
            if (!passwordRegex.test(newPassword)) { alert('æ–°å¯†ç æ ¼å¼é”™è¯¯ï¼éœ€6-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—'); return; }
            if (newPassword !== confirmNewPassword) { alert('ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´ï¼'); return; }
            if (newPassword === oldPassword) { alert('æ–°å¯†ç ä¸èƒ½ä¸åŸå¯†ç ç›¸åŒï¼'); return; }
            
            currentUser.password = newPassword;
            passwordSuccessHint.style.display = 'block';
            oldPasswordInput.value = '';
            newPasswordInput.value = '';
            confirmNewPasswordInput.value = '';
            setTimeout(() => passwordSuccessHint.style.display = 'none', 3000);
            utils.saveToStorage(CONFIG.STORAGE_KEYS.USERS, users);
        });

        // æ³¨å†Œç™»å½•é€»è¾‘
        regSubmit.addEventListener('click', () => {
            const username = regUsername.value.trim();
            const password = regPassword.value.trim();
            const activationCode = verifyCode.value.trim();
            if (!username || !password || !activationCode) { alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯ï¼'); return; }
            if (activationCode !== CONFIG.USER_ACTIVATION_CODE) { alert('ç”¨æˆ·æ¿€æ´»ç é”™è¯¯ï¼'); return; }
            if (users.some(u => u.username === username)) { alert('è¯¥è´¦å·å·²å­˜åœ¨ï¼'); return; }
            const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d).{6,20}$/;
            if (!passwordRegex.test(password)) { alert('å¯†ç æ ¼å¼é”™è¯¯ï¼éœ€6-20ä½ï¼ŒåŒ…å«å­—æ¯å’Œæ•°å­—'); return; }
            const now = new Date().getTime();
            const lastRegisterTime = userRegisterTimes[username] || 0;
            if (now - lastRegisterTime < CONFIG.REGISTER_INTERVAL) {
                const remaining = Math.ceil((CONFIG.REGISTER_INTERVAL - (now - lastRegisterTime)) / 60000);
                alert(`æ¯å°æ—¶ä»…å¯æ³¨å†Œ1ä¸ªè´¦å·ï¼Œå‰©ä½™${remaining}åˆ†é’Ÿåå¯æ³¨å†Œ`);
                return;
            }
            
            const newUser = { username, password, registerTime: now, lastLoginTime: now, activatedCards: [] };
            users.push(newUser);
            userRegisterTimes[username] = now;
            utils.saveToStorage(CONFIG.STORAGE_KEYS.USERS, users);
            utils.saveToStorage(CONFIG.STORAGE_KEYS.USER_REGISTER_TIMES, userRegisterTimes);
            
            alert('æ³¨å†ŒæˆåŠŸï¼Œå³å°†è‡ªåŠ¨ç™»å½•ï¼');
            loginUsername.value = username;
            loginPassword.value = password;
            utils.switchPage(registerPage, loginPage);
            
            setTimeout(() => {
                currentUser = newUser;
                utils.switchPage(loginPage, userBackend);
                updateDashboard(newUser);
                regUsername.value = '';
                regPassword.value = '';
                verifyCode.value = '';
            }, 800);
        });

        loginSubmit.addEventListener('click', () => {
            const username = loginUsername.value.trim();
            const password = loginPassword.value.trim();
            if (!username || !password) { alert('è¯·å¡«å†™è´¦å·å¯†ç ï¼'); return; }
            const user = users.find(u => u.username === username && u.password === password);
            if (!user) { alert('è´¦å·æˆ–å¯†ç é”™è¯¯ï¼'); return; }
            
            currentUser = user;
            utils.switchPage(loginPage, userBackend);
            updateDashboard(user);
            currentUsernameEl.value = user.username;
            loginUsername.value = '';
            loginPassword.value = '';

            if (isFirstLogin) {
                utils.showToast(avatarToast, 'æ¬¢è¿è¿›å…¥ç”¨æˆ·ä¸­å¿ƒï¼');
                isFirstLogin = false;
            }
        });

        // é¡µé¢å¯¼èˆªé€»è¾‘
        userCenterCard.addEventListener('click', () => {
            pageContainer.style.display = 'block';
            utils.switchPage(loginPage, loginPage);
        });

        buyCard.addEventListener('click', () => {
            window.open('https://lv.youxi186.com/shop/Carpauxiliary', '_blank');
        });

        // ä¼šå‘˜ä¸­å¿ƒç‚¹å‡»æç¤ºï¼ˆæ ¸å¿ƒä¿®æ”¹ï¼‰
        vipCenterCard.addEventListener('click', () => {
            utils.showToast(avatarToast, 'æš‚æ—¶æ— æ³•ä½¿ç”¨è¯¥åŠŸèƒ½');
        });

        loginBackBtn.addEventListener('click', () => utils.switchPage(loginPage, null, true));
        regBackBtn.addEventListener('click', () => utils.switchPage(registerPage, null, true));
        backToMainBtn.addEventListener('click', () => utils.switchPage(userBackend, null, true));

        toRegLink.addEventListener('click', () => utils.switchPage(loginPage, registerPage));
        toLoginLink.addEventListener('click', () => utils.switchPage(registerPage, loginPage));

        logoutBtn.addEventListener('click', () => {
            utils.switchPage(userBackend, loginPage);
            setTimeout(() => {
                pageContainer.style.display = 'none';
                currentUser = null;
                isFirstLogin = true;
            }, 800);
        });

        // èœå•åˆ‡æ¢
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                menuItems.forEach(i => i.classList.remove('active'));
                mainSections.forEach(section => section.style.display = 'none');
                item.classList.add('active');
                const target = item.getAttribute('data-target');
                document.getElementById(target).style.display = 'block';
                if ((target === 'dashboard' || target === 'cards') && currentUser) refreshCardData(currentUser);
                if (target === 'settings' && currentUser) currentUsernameEl.value = currentUser.username;
            });
        });
    </script>
</body>
</html>
